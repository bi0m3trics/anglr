<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Elevating Spatial Data with Topology • anglr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Elevating Spatial Data with Topology">
<meta property="og:description" content="Tidy topological approaches to spatial data, illustrated with plotting using Open Graphics Library. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">anglr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.8.9400</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="anglr-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#anglr-" class="anchor"></a>anglr <img src="data-raw/anglr-logo.png" align="right" height="192">
</h1></div>
<p>The anglr package aims to provide direct access to generic 3D tools.</p>
<p>… geospatial is cool … 3D is cool … putting them together is <em>challenging</em> …</p>
<p>The anglr package provides a full suite of mesh-creation and 3D plotting functions, extending the <a href="https://CRAN.r-project.org/package=rgl">rgl package</a> functions <code><a href="reference/as.mesh3d.html">as.mesh3d()</a></code>, <code><a href="reference/plot3d.html">plot3d()</a></code>, <code><a href="reference/plot3d.html">persp3d()</a></code>, <code><a href="reference/plot3d.html">wire3d()</a></code>, and <code><a href="reference/dot3d.html">dot3d()</a></code>.</p>
<p>Key working examples are in <code><a href="reference/as.mesh3d.html">?anglr::as.mesh3d</a></code>, and <code>?anglr::as.plo3d</code> see <a href="https://hypertidy.github.io/anglr/reference/as.mesh3d.html">anglr::as.mesh3d</a> and <a href="https://hypertidy.github.io/anglr/reference/plot3d.html">anglr::plot3d</a>.</p>
<div id="features" class="section level2">
<h2 class="hasAnchor">
<a href="#features" class="anchor"></a>Features</h2>
<ul>
<li><p>Convert geospatial objects to 3D with <code><a href="reference/as.mesh3d.html">as.mesh3d()</a></code> - works for matrix, raster, sf-polygons, sp-polygons, silicate-triangles</p></li>
<li><p>Plot geospatial objects with <code><a href="reference/plot3d.html">plot3d()</a></code> - works for matrix, raster, sf (any type), sp, trip, silicate</p></li>
<li><p>Merge raster and vector with <code>as.mesh3d</code> - elevate polygons or lines with a raster dem</p></li>
<li><p>Drape imagery onto raster or polygon surfaces with <code>as.mesh3d</code> - <code>image_texture</code> argument</p></li>
<li><p>Create any mesh above and reproject to any projection, including geocentric</p></li>
<li><p>Use <code>shade3d()</code> or <code><a href="reference/plot3d.html">plot3d()</a></code> or <code><a href="reference/plot3d.html">wire3d()</a></code> from the rgl package to plot any <code>mesh3d</code> object created. (<code><a href="reference/plot3d.html">plot3d()</a></code> also calls the converters for non-mesh types, so we can quickly get a 3D scene from any spatial data)</p></li>
</ul>
</div>
<div id="why-anglr-isnt-this-all-done" class="section level2">
<h2 class="hasAnchor">
<a href="#why-anglr-isnt-this-all-done" class="anchor"></a>Why anglr, isn’t this all done?</h2>
<p>The rgl package has long supported powerful interactive 3D visualizations for points, lines, and surfaces. Surfaces can be of any form, triangles or quad primitives wrapped around a bunny, a globe, or platonic shapes such as cubes and octahedrons. There is support for <em>textures</em>, which is essentially imagery draped onto a surface at native resolution - there is no loss of image quality at all.</p>
<p>But, rgl is hard to use, and there are very few helpers for converting existing formats into the right form. There are some, for example <code><a href="reference/as.mesh3d.html">as.mesh3d()</a></code> methods for commonly used triangulation packages. It also was harder to use in the past, but recently has been improved a great deal for taking generic data and converting it.</p>
<p>There has been no support in rgl for <em>geo-spatial</em> data structures, such as spatial rasters, polygons and lines that are common in GIS workflows. The anglr package aims to fill this gap, and gives total control over conversion of spatial and other data into mesh forms - even if visualization is not the end goal.</p>
<p>There <em>are</em> packages that convert matrices and imagery to compelling animated 3D scenes, but these are targetted at presentation rather than generality and development. The scenes are specifically honed to look flashy as an animated GIF, and adding general extra data to a given scene requires a lot of workarounds. There are also no well-known packages that use the rgl mesh3d format, most famous examples use <code><a href="https://rdrr.io/pkg/rgl/man/surface3d.html">rgl::surface3d()</a></code> which is limited to the model that provides for an input matrix and overlaid colours or textures. These cannot be wrapped arbitrarily around curves in any 3D coordinate system.</p>
</div>
</div>
<div id="key-development-topics" class="section level1">
<h1 class="hasAnchor">
<a href="#key-development-topics" class="anchor"></a>Key development topics</h1>
<ul>
<li><p>Use <code><a href="reference/copy_down.html">copy_down()</a></code> to merge raster values onto vector meshes (WIP, this part is in flux after refactoring as.mesh3d …).</p></li>
<li><p>For developers: delve into the technical details, all code is as modular as possible and relies on basic workhorse packages that do one simple task …</p></li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>We must use a version of R that is 3.3.2 or later, and <code>anglr</code> can only be installed from Github, and that at least requires the package <code>devtools</code>.</p>
<p>Also required are packages rgl, RTriangle, sf, silicate, and reproj, so first make sure you can install and use these. On a fresh installation of R these package together require a lot of other contributed packages, and that can take some time.</p>
<div class="sourceCode" id="cb1"><pre class="r">install.packages("rgl")
install.packages("RTriangle")
install.packages("sf")
install.packages("devtools")
install.packages("silicate")
install.packages("reproj")</pre></div>
<p>With that out of the way, install from Github using devtools.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"hypertidy/anglr"</span>)</pre></div>
<p>Feel free to contact me via the <a href="https://github.com/hypertidy/anglr/issues/">Issues</a> if you have problems, or these notes don’t make sense.</p>
<div id="ubuntudebian" class="section level3">
<h3 class="hasAnchor">
<a href="#ubuntudebian" class="anchor"></a>Ubuntu/Debian</h3>
<p>On Linux you will need at least the following installed by an administrator, here tested on Ubuntu Bionic 18.04 (note the apt/sources.list is specific to version).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">## key for apt-get update, see http://cran.r-project.org/bin/linux/ubuntu/README</span></span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co">## up to date GDAL and PROJ.4 and GEOS</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">## https://launchpad.net/~ubuntugis/+archive/ubuntu/ubuntugis-unstable</span></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="ex">add-apt-repository</span> ppa:ubuntugis/ubuntugis-unstable --yes</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="ex">apt</span> update </span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="ex">apt</span> upgrade --assume-yes</span>
<span id="cb3-9"><a href="#cb3-9"></a></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">## Install 3rd parties</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="ex">apt</span> install libproj-dev libgdal-dev libgeos-dev  libssl-dev libgl1-mesa-dev libglu1-mesa-dev libudunits2-dev</span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">## install R, if you need to</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co">## apt install r-base r-base-dev </span></span></code></pre></div>
<p>Then in R</p>
<div class="sourceCode" id="cb4"><pre class="r">install.packages("devtools")
install.packages(c("dplyr", "proj4", "raster",  "rgl", "rlang", "RTriangle", "spbabel", "tibble", "viridis", "reproj", "silicate"))
devtools::install_github("hypertidy/anglr")</pre></div>
</div>
</div>
<div id="get-involved" class="section level2">
<h2 class="hasAnchor">
<a href="#get-involved" class="anchor"></a>Get involved!</h2>
<p>Let me know if you have problems, or are interested in this work. See the issues tab to make suggestions or report bugs.</p>
<p><a href="https://github.com/hypertidy/anglr/issues" class="uri">https://github.com/hypertidy/anglr/issues</a></p>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
</div>
<div id="demo-01---merge-vector-and-raster-data" class="section level2">
<h2 class="hasAnchor">
<a href="#demo-01---merge-vector-and-raster-data" class="anchor"></a>Demo 01 - merge vector and raster data</h2>
<p>An <a href="https://hypertidy.github.io/anglr-demos/demo01.html">example of merging vector and raster</a>, with a continuous interpretation applied to the polygon mesh and underlying elevation.</p>
<div class="sourceCode" id="cb5"><pre class="r">## a global DEM
data("gebco1", package = "anglr")
library(sf)
## North Carolina, the sf boilerplate polygon layer
nc </pre></div>
<p>Follow this link to see the result:</p>
<p><a href="https://hypertidy.github.io/anglr-demos/demo01.html">Demo01</a></p>
<p>Here the <code>z</code> argument to <code><a href="reference/copy_down.html">copy_down()</a></code> is a raster, and so the <code>z_</code> coordinate of the mesh is updated by extracting values from the raster using bilinear interpolation.</p>
</div>
<div id="demo-02---copy-discrete-values-to-polygon-elevation" class="section level2">
<h2 class="hasAnchor">
<a href="#demo-02---copy-discrete-values-to-polygon-elevation" class="anchor"></a>Demo 02 - copy discrete values to polygon elevation</h2>
<p>An <a href="https://hypertidy.github.io/anglr-demos/demo02.html">example of elevating polygons with constant attribute values</a>, a discrete interpretation that requires separating the (until-now) continuous mesh of polygon features.</p>
<p>With argument <code>z</code> set to a column in the layer or a specific vector of values this is used as a constant offset for the <code>z_</code> value, and the mesh is <em>separated by feature</em>.</p>
<p>(The simpler TRI model is used here because we only need poor quality triangles for planar geometry. )</p>
<div class="sourceCode" id="cb6"><pre class="r">
## either form works
#c_mesh </pre></div>
<p>Follow this link to see the result:</p>
<p><a href="https://hypertidy.github.io/anglr-demos/demo02.html">Demo02</a></p>
<p>In the silicate models, complex objects are decomposed to a set of related, linked tables. Object identity is maintained with attribute metadata and this is carried through to colour and other aesthetics.</p>
<p>Plot (3D) methods take those tables and generate the “indexed array” structures needed for ‘rgl’. (<code>plot3d</code> will return the rgl-model form). This gets us part of the way towards having the best of both worlds of GIS and 3D graphics.</p>
<p>Another example shows this approach applied to a 3D multipatch shapefile, with a few easy steps we can plot a wiremesh or roof/floor polygons from a civic building footprint.</p>
<p><a href="http://rpubs.com/cyclemumner/367010" class="uri">http://rpubs.com/cyclemumner/367010</a></p>
<hr>
<p>Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Michael D. Sumner <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/hypertidy/anglr"><img src="http://badges.herokuapp.com/travis/hypertidy/anglr?branch=master&amp;env=BUILD_NAME=trusty_release&amp;label=linux" alt="Travis-CI Build Status"></a></li>
<li><a href="https://travis-ci.org/hypertidy/anglr"><img src="http://badges.herokuapp.com/travis/hypertidy/anglr?branch=master&amp;env=BUILD_NAME=osx_release&amp;label=osx" alt="Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/mdsumner/anglr"><img src="https://ci.appveyor.com/api/projects/status/github/hypertidy/anglr?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/hypertidy/anglr?branch=master"><img src="https://img.shields.io/codecov/c/github/hypertidy/anglr/master.svg" alt="Coverage Status"></a></li>
<li><a href="https://cran.r-project.org/package=anglr"><img src="http://www.r-pkg.org/badges/version/anglr" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=anglr"><img src="http://cranlogs.r-pkg.org/badges/anglr" alt="CRAN_Download_Badge"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
